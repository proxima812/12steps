---
import { twMerge } from "tailwind-merge";
const { data, slug, index } = Astro.props;
---

<a
  href={`/posts/${slug}`}
  role="article"
  class:list={twMerge(
    `group relative row-span-3 min-h-[208px] justify-end overflow-hidden rounded-xl`,
    index === 0 ? "row_span-7" : index === 2 || index === 3 ? "row-span-4" : "",
  )}
>
  <div
    class="h-full w-full bg-black"
    style="min-height: 200px;
        background-color: rgb(147, 51, 234);
        background-image: radial-gradient(at 21% 25%, rgb(103, 232, 249) 0, transparent 45%), radial-gradient(at 60% 63%, rgb(187, 247, 208) 0, transparent 82%), radial-gradient(at 78% 71%, rgb(29, 78, 216) 0, transparent 1%), radial-gradient(at 37% 45%, rgb(253, 230, 138) 0, transparent 36%), radial-gradient(at 93% 94%, rgb(38, 38, 38) 0, transparent 88%), radial-gradient(at 4% 2%, rgb(209, 213, 219) 0, transparent 13%);
      "
  >
  </div>

  <div class="bg_glass">
    <div class="absolute bottom-0 z-10 flex w-full flex-col gap-3 p-5">
      <h2
        class="text-xl font-bold leading-tight text-white transition-transform ease-linear group-hover:-translate-y-[2px]"
      >
        {data.title}
      </h2>
      <div
        aria-label="Теги"
        class="flex gap-2 transition-transform ease-linear group-hover:translate-x-[1.10px]"
      >
        {
          data.tags &&
            data.tags.map((tag) => (
              <span class="pill relative rounded-full px-3 py-1 text-xs leading-tight text-white">
                {tag}
              </span>
            ))
        }
      </div>
    </div>
  </div>
</a>

<style>
  .pill:before {
    position: absolute;
    inset: 0;
    content: "";
    margin: -1px;
    border-radius: inherit;
    background: linear-gradient(
      45deg,
      rgb(67, 216, 51) 0%,
      rgb(65, 255, 246) 100%
    );
    z-index: -2;
  }
  .pill:after {
    position: absolute;
    inset: 0;
    background-color: #0d0f1480;
    content: "";
    z-index: -1;
    border-radius: inherit;
  }
  .bg_glass {
    @apply absolute bottom-0 h-full w-full;
  }
  /* .bg_glass:hover:after {
    transition: all 0.2s linear;
    background-size: 0 0;
  } */
  .bg_glass:after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      180deg,
      transparent,
      rgba(0, 0, 0, 0.7) 60%,
      #121122 90%,
      #272727
    );
    transition: all 0.2s linear;
  }

  .row_span-7 {
    grid-row: span 7;
  }
</style>
