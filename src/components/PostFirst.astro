---
import { Image } from "astro:assets";
import { twMerge } from "tailwind-merge";
import img from "../assets/2.jpg";
const { data, slug, index } = Astro.props;
---

<a
  href={`/posts/${slug}`}
  role="article"
  class:list={twMerge(
    `group relative row-span-3 min-h-[208px] justify-end overflow-hidden rounded-xl`,
    index === 0 ? "row_span-7" : index === 2 || index === 3 ? "row-span-4" : "",
  )}
>
  <Image
    class="h-full w-full rounded-xl bg-center object-cover transition-transform ease-linear group-hover:-translate-y-[1.25px]"
    src={data.heroImage ?? img}
    alt={data.title}
  />
  <!-- <div
    class="absolute right-0 top-0 rounded-bl-xl bg-red-300/50 px-3 py-1 leading-tight text-white ring-1 ring-red-300 backdrop-blur-xl backdrop-brightness-75"
  >
    новый &#128293;
  </div> -->
  <div class="bg_glass">
    <div class="absolute bottom-0 z-10 flex flex-col gap-3 p-5">
      <h2
        class="text-xl font-bold leading-tight text-white transition-transform ease-linear group-hover:-translate-y-[2px]"
      >
        {data.title}
      </h2>
      <div
        aria-label="Теги"
        class="flex gap-2 transition-transform ease-linear group-hover:translate-x-[1.10px]"
      >
        {
          data.tags &&
            data.tags.map((tag) => (
              <span class="pill relative rounded-full px-3 py-1 text-xs leading-tight text-white">
                {tag}
              </span>
            ))
        }
      </div>
    </div>
  </div>
</a>

<style>
  .pill:before {
    position: absolute;
    inset: 0;
    content: "";
    margin: -1px;
    border-radius: inherit;
    background: linear-gradient(
      45deg,
      rgb(67, 216, 51) 0%,
      rgb(65, 255, 246) 100%
    );
    z-index: -2;
  }
  .pill:after {
    position: absolute;
    inset: 0;
    background-color: #0d0f1480;
    content: "";
    z-index: -1;
    border-radius: inherit;
  }
  .bg_glass {
    @apply absolute bottom-0 h-full w-full;
  }
  /* .bg_glass:hover:after {
    transition: all 0.2s linear;
    background-size: 0 0;
  } */
  .bg_glass:after {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: linear-gradient(
      180deg,
      transparent,
      rgba(0, 0, 0, 0.7) 60%,
      #121122 90%,
      #272727
    );
    transition: all 0.2s linear;
  }

  .row_span-7 {
    grid-row: span 7;
  }
</style>
